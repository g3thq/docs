(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{118:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return y}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,y=u["".concat(c,".").concat(d)]||u[d]||b[d]||o;return n?a.a.createElement(y,i(i({ref:t},l),{},{components:n})):a.a.createElement(y,i({ref:t},l))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,c=new Array(o);c[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var l=2;l<o;l++)c[l]=n[l];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},85:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return l}));var r=n(3),a=(n(0),n(118));const o={id:"api_keys",title:"API Keys",sidebar_label:"API Keys"},c={unversionedId:"micros/api_keys",id:"micros/api_keys",isDocsHomePage:!1,title:"API Keys",description:"API keys are a great way to protect your APIs, which is why Deta has them built into Micros. API keys will work with any framework that runs on the Micros \u2013 no coding required from your end!",source:"@site/docs/micros/api_keys.md",slug:"/micros/api_keys",permalink:"/docs/micros/api_keys",editUrl:"https://github.com/g3thq/docs/tree/master/docs/micros/api_keys.md",version:"current",sidebar_label:"API Keys"},i=[{value:"1. Enable Deta Access",id:"1-enable-deta-access",children:[]},{value:"2. Create an API key",id:"2-create-an-api-key",children:[]},{value:"3. Using API keys",id:"3-using-api-keys",children:[]}],s={rightToc:i};function l({components:e,...t}){return Object(a.b)("wrapper",Object(r.a)({},s,t,{components:e,mdxType:"MDXLayout"}),Object(a.b)("p",null,"API keys are a great way to protect your APIs, which is why Deta has them built into Micros. API keys will work with any framework that runs on the Micros \u2013 no coding required from your end! "),Object(a.b)("h3",{id:"1-enable-deta-access"},"1. Enable Deta Access"),Object(a.b)("p",null,"To use API keys with your Micro, first you need to enable ",Object(a.b)("strong",{parentName:"p"},"Deta Access")," by running the following command from the root directory of your Micro's source code.  "),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"deta auth enable\n")),Object(a.b)("p",null,"Now your API is protected by ",Object(a.b)("strong",{parentName:"p"},"Deta Access")," and only ",Object(a.b)("em",{parentName:"p"},"accessible")," by you. Next, you need to create an API key to authenticate your requests."),Object(a.b)("h3",{id:"2-create-an-api-key"},"2. Create an API key"),Object(a.b)("p",null,"To create a new API key, run the following command, make sure to provide at least the ",Object(a.b)("inlineCode",{parentName:"p"},"name")," argument."),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"For more info, refer to the ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/cli/commands/#deta-auth-create-api-key"}),Object(a.b)("inlineCode",{parentName:"a"},"deta auth create-key"))," docs.")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),'deta auth create-api-key --name first_key --desc "api key for agent 1"\n')),Object(a.b)("p",null,"This will send a response similar to this:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-json"}),'{\n    "name": "first_key",\n    "description": "api key for agent 1",\n    "prefix": "randomprefix",\n    "api_key": "randomprefix.supersecretrandomstring",\n    "created": "2021-04-22T11:50:08Z"\n}\n')),Object(a.b)("p",null,"In this example, the API key would be ",Object(a.b)("inlineCode",{parentName:"p"},"randomprefix.supersecretrandomstring"),"."),Object(a.b)("p",null,"The key will only be shown to you once, make sure to save it in a secure place."),Object(a.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(a.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"API keys are passwords")),Object(a.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"Anyone with this API key can access your Micro, make sure to treat it as a password and save it in a secure place like a password manager."))),Object(a.b)("h3",{id:"3-using-api-keys"},"3. Using API keys"),Object(a.b)("p",null,"Simply add this key to the header of every request you make to your Micro. "),Object(a.b)("p",null,"For example, suppose your Micro has an endpoint ",Object(a.b)("inlineCode",{parentName:"p"},"/tut")," that responds with a simple string ",Object(a.b)("inlineCode",{parentName:"p"},"Hello"),". You can set the value of ",Object(a.b)("inlineCode",{parentName:"p"},"X-API-Key")," header along with your request like the following:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-json"}),"curl --request GET \\\n  --url https://2kzkof.deta.dev/tut \\\n  --header 'Content-Type: application/json' \\\n  --header 'X-API-Key: awEGbjqg.D1sETRFJKHWtcxSRSmofY2-akZjqFPh7j'\n")),Object(a.b)("p",null,"That is all you need to protect your APIs!"))}l.isMDXComponent=!0}}]);